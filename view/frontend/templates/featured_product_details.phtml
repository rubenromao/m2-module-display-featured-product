<?php
declare(strict_types=1);

use Magento\Framework\Escaper;
use RubenRomao\DisplayFeaturedProduct\Block\FeaturedProductBlock;
use RubenRomao\DisplayFeaturedProduct\ViewModel\FeaturedProductData;

/** @var FeaturedProductBlock $block */
/** @var Escaper $escaper */
/** @var FeaturedProductData $productData */
$productData = $block->getData('featured_product_vm');
$data = $productData->getFeaturedProduct();
?>
<?php if ($data && $data->getItems()): ?>
    <?php foreach ($data->getItems() as $product): ?>
        <div class="product details product-item-details">
            <h2><?= $escaper->escapeHtml($product->getName()) ?></h2>
            <?= $escaper->escapeHtmlAttr(strip_tags($product->getDescription())) ?><br/><br/>
            <p>
                <strong><?= $escaper->escapeHtml(__('Price:')) ?></strong>
                <?= $escaper->escapeHtml($productData->getFormattedPrice($product->getPrice())) ?>
            </p>
            <a href='<?= $escaper->escapeUrl($product->getProductUrl()) ?>'
               class='action primary'>
               <?= $escaper->escapeHtml(__("Go to the Product Page")) ?>
            </a>
        </div>
    <?php endforeach; ?>
<?php endif; ?>
